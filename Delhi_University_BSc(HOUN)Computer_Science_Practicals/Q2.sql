
DROP DATABASE COMPANY2_18_94089;


CREATE DATABASE COMPANY2_18_94089;


USE COMPANY2_18_94089;


CREATE TABLE DEPT_LOCATIONS(
	DNUMBER INT,
	DLOCATION VARCHAR(50),
	PRIMARY KEY(DNUMBER,DLOCATION)
);


CREATE TABLE EMPLOYEE(
	FNAME VARCHAR(50),
	MINIT CHAR(1),
	LNAME VARCHAR(50),
	SSN INT PRIMARY KEY,
	BDATE DATE,
	ADDRESS VARCHAR(255),
	SEX CHAR(1),
	SALARY INT,
	SUPER_SSN INT,
	DNO INT
);


CREATE TABLE DEPARTMENT(
	DNAME VARCHAR(50),
	DNUMBER INT PRIMARY KEY,
	MGR_SSN INT,
	MGR_START_DATE DATE
);


CREATE TABLE PROJECT(
	PNAME VARCHAR(50),
	PNUMBER INT PRIMARY KEY,
	PLOCATION VARCHAR(50),
	DNUM INT
);


CREATE TABLE WORKS_ON(
	ESSN INT,
	PNO INT,
	HOURS DECIMAL(4,1),
	PRIMARY KEY(ESSN,PNO)
);


CREATE TABLE DEPENDENT(
	ESSN INT,
	DEPARTMENT_NAME VARCHAR(50),
	SEX CHAR(1),
	BDATE DATE,
	RELATIONSHIP VARCHAR(50),
	PRIMARY KEY(ESSN,DEPARTMENT_NAME)
);


INSERT INTO DEPARTMENT VALUES("RESEARCH",5,333445555,"1988-05-22"),
			     ("ADMINISTRATION",4,987654321,"1995-01-01"),
			     ("HEADQUARTERS",1,888665555,"1981-06-19");


INSERT INTO DEPT_LOCATIONS VALUES(1,"HOUSTON"),
				 (4,"STAFFORD"),
				 (5,"BELLAIRE"),
				 (5,"SUGARLAND"),
				 (5,"HOUSTON");


INSERT INTO PROJECT VALUES("PROJECTX",1,"BELLAIRE",5),
			  ("PROJECTY",2,"SUGARLAND",5),
			  ("PROJECTZ",3,"HOUSTON",5),
			  ("COMPUTERIZATION",10,"STAFFORD",4),
			  ("REORGANIZATION",20,"HOUSTON",1),
			  ("NEWBENEFITS",30,"STAFFORD",4);


INSERT INTO DEPENDENT VALUES(333445555,"ALICE","F","1986-04-05","DAUGHTER"),
			    (333445555,"THEODORE","M","1983-10-25","SON"),
			    (333445555,"JOY","F","1958-05-03","SPOUSE"),
			    (987654321,"ABNER","M","1942-02-28","SPOUSE"),
			    (123456789,"MICHAEL","M","1988-01-04","SON"),
			    (123456789,"ALICE","F","1988-12-30","DAUGHTER"),
			    (123456789,"ELIZABETH","F","1967-05-05","SPOUSE");


INSERT INTO WORKS_ON VALUES(123456789,1,32.5),
			   (123456789,2,7.5),
			   (666884444,3,40.0),
			   (333445555,3,10.0),
			   (453453453,1,20.0),
			   (453453453,2,20.0),
			   (333445555,2,10.0),
			   (333445555,10,10.0),
			   (333445555,20,10.0),
			   (999887777,30,30.0),
			   (999887777,10,10.0),
			   (987987987,10,35.0),
			   (987987987,30,5.0),
			   (987654321,30,20.0),
			   (987654321,20,15.0),
			   (888665555,20,NULL);


INSERT INTO EMPLOYEE VALUES("JOHN","B","SMITH",123456789,"1965-01-09","731 FONDREN, HOUSTON, TX","M",30000,333445555,5),
			   ("FRANKLIN","T","WONG",333445555,"1955-12-08","638 VOSS, HOUSTON, TX","M",40000,888665555,5),
			   ("ALICIA","J","ZELAYA",999887777,"1968-01-19","3321 CASTLE, SPRING, TX","F",25000,987654321,4),
			   ("JENNIFER","S","WALLACE",987654321,"1941-06-20","291 BERRY, BELLAIRE, TX","F",43000,888665555,4),
			   ("RAMESH","K","NARAYAN",666884444,"1962-09-15","975 FIRE OAK, HUMBLE, TX","M",38000,333445555,5),
			   ("JOYCE","A","ENGLISH",453453453,"1972-07-31","5631 RICE, HOUSTON, TX","F",25000,333445555,5),
			   ("AHMAD","V","JABBAR",987987987,"1969-03-29","980 DALLAS, HOUSTON, TX","M",25000,987654321,4),
			   ("JAMES","E","BORG",888665555,"1937-11-10","450 STONE, HOUSTON, TX","M",55000,NULL,1);



ALTER TABLE EMPLOYEE Add CONSTRAINT F1 FOREIGN KEY(SUPER_SSN)  REFERENCES EMPLOYEE(SSN);
ALTER TABLE EMPLOYEE ADD CONSTRAINT F2 FOREIGN KEY (DNO) REFERENCES DEPARTMENT(DNUMBER);
ALTER TABLE DEPARTMENT Add CONSTRAINT F3 FOREIGN KEY(MGR_SSN)  REFERENCES EMPLOYEE(SSN);
ALTER TABLE DEPT_LOCATIONS Add CONSTRAINT F4 FOREIGN KEY(DNUMBER)  REFERENCES DEPARTMENT(DNUMBER);
ALTER TABLE PROJECT Add CONSTRAINT F5 FOREIGN KEY(DNUM)  REFERENCES DEPARTMENT(DNUMBER);
ALTER TABLE WORKS_ON Add CONSTRAINT F6 FOREIGN KEY(ESSN)  REFERENCES EMPLOYEE(SSN);
ALTER TABLE WORKS_ON Add CONSTRAINT F7 FOREIGN KEY(PNO)  REFERENCES PROJECT(PNUMBER);
ALTER TABLE DEPENDENT Add CONSTRAINT F8 FOREIGN KEY(ESSN)  REFERENCES EMPLOYEE(SSN);

